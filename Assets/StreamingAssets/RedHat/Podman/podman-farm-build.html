<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>podman-farm-build 1</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h2 id="name">NAME</h2>
<p>podman-farm-build - Build images on farm nodes, then bundle them into
a manifest list</p>
<h2 id="synopsis">SYNOPSIS</h2>
<p><strong>podman farm build</strong> [<em>options</em>]
[<em>context</em>]</p>
<h2 id="description">DESCRIPTION</h2>
<p><strong>podman farm build</strong> Builds an image on all nodes in a
farm and bundles them up into a manifest list. It executes the
<code>podman build</code> command on the nodes in the farm with the
given Containerfile. Once the images are built on all the farm nodes,
the images will be pushed to the registry given via the
<strong>--tag</strong> flag. Once all the images have been pushed, a
manifest list will be created locally and pushed to the registry as
well.</p>
<p>The manifest list will contain an image per native architecture type
that is present in the farm.</p>
<p>The primary function of this command is to create multi-architecture
builds that will be faster than doing it via emulation using
<code>podman build --arch --platform</code>.</p>
<p>If no farm is specified, the build will be sent out to all the nodes
that <code>podman system connection</code> knows of.</p>
<p>Note: Since the images built are directly pushed to a registry, the
user must pass in a full image name using the <strong>--tag</strong>
option in the format
<em>registry</em><strong>/</strong>_repository_<strong>/</strong>_imageName_[<strong>:</strong>_tag_]`.</p>
<h2 id="options">OPTIONS</h2>
<h4
id="add-hosthostnamehostname...ip"><strong>--add-host</strong>=<em>hostname[;hostname[;...]]</em>:<em>ip</em></h4>
<p>Add a custom host-to-IP mapping to the container's
<code>/etc/hosts</code> file.</p>
<p>The option takes one or multiple semicolon-separated hostnames to be
mapped to a single IPv4 or IPv6 address, separated by a colon. It can
also be used to overwrite the IP addresses of hostnames Podman adds to
<code>/etc/hosts</code> by default (also see the <strong>--name</strong>
and <strong>--hostname</strong> options). This option can be specified
multiple times to add additional mappings to <code>/etc/hosts</code>. It
conflicts with the <strong>--no-hosts</strong> option and conflicts with
<em>no_hosts=true</em> in <code>containers.conf</code>.</p>
<p>Instead of an IP address, the special flag <em>host-gateway</em> can
be given. This resolves to an IP address the container can use to
connect to the host. The IP address chosen depends on your network
setup, thus there's no guarantee that Podman can determine the
<em>host-gateway</em> address automatically, which will then cause
Podman to fail with an error message. You can overwrite this IP address
using the <em>host_containers_internal_ip</em> option in
<em>containers.conf</em>.</p>
<p>The <em>host-gateway</em> address is also used by Podman to
automatically add the <code>host.containers.internal</code> and
<code>host.docker.internal</code> hostnames to <code>/etc/hosts</code>.
You can prevent that by either giving the <strong>--no-hosts</strong>
option, or by setting <em>host_containers_internal_ip="none"</em> in
<em>containers.conf</em>. If no <em>host-gateway</em> address was
configured manually and Podman fails to determine the IP address
automatically, Podman will silently skip adding these internal hostnames
to <code>/etc/hosts</code>. If Podman is running in a virtual machine
using <code>podman machine</code> (this includes Mac and Windows hosts),
Podman will silently skip adding the internal hostnames to
<code>/etc/hosts</code>, unless an IP address was configured manually;
the internal hostnames are resolved by the gvproxy DNS resolver
instead.</p>
<p>Podman will use the <code>/etc/hosts</code> file of the host as a
basis by default, i.e. any hostname present in this file will also be
present in the <code>/etc/hosts</code> file of the container. A
different base file can be configured using the <em>base_hosts_file</em>
config in <code>containers.conf</code>.</p>
<h4
id="annotationannotationvalue"><strong>--annotation</strong>=<em>annotation=value</em></h4>
<p>Add an image <em>annotation</em> (e.g. annotation=<em>value</em>) to
the image metadata. Can be used multiple times.</p>
<p>Note: this information is not present in Docker image formats, so it
is discarded when writing images in Docker formats.</p>
<h4 id="authfilepath"><strong>--authfile</strong>=<em>path</em></h4>
<p>Path of the authentication file. Default is
<code>${XDG_RUNTIME_DIR}/containers/auth.json</code> on Linux, and
<code>$HOME/.config/containers/auth.json</code> on Windows/macOS. The
file is created by <strong><a href="podman-login.html">podman
login</a></strong>. If the authorization state is not found there,
<code>$HOME/.docker/config.json</code> is checked, which is set using
<strong>docker login</strong>.</p>
<p>Note: There is also the option to override the default path of the
authentication file by setting the <code>REGISTRY_AUTH_FILE</code>
environment variable. This can be done with <strong>export
REGISTRY_AUTH_FILE=<em>path</em></strong>.</p>
<h4
id="build-argargvalue"><strong>--build-arg</strong>=<em>arg=value</em></h4>
<p>Specifies a build argument and its value, which is interpolated in
instructions read from the Containerfiles in the same way that
environment variables are, but which are not added to environment
variable list in the resulting image's configuration.</p>
<h4
id="build-arg-filepath"><strong>--build-arg-file</strong>=<em>path</em></h4>
<p>Specifies a file containing lines of build arguments of the form
<code>arg=value</code>. The suggested file name is
<code>argfile.conf</code>.</p>
<p>Comment lines beginning with <code>#</code> are ignored, along with
blank lines. All others must be of the <code>arg=value</code> format
passed to <code>--build-arg</code>.</p>
<p>If several arguments are provided via the
<code>--build-arg-file</code> and <code>--build-arg</code> options, the
build arguments are merged across all of the provided files and command
line arguments.</p>
<p>Any file provided in a <code>--build-arg-file</code> option is read
before the arguments supplied via the <code>--build-arg</code>
option.</p>
<p>When a given argument name is specified several times, the last
instance is the one that is passed to the resulting builds. This means
<code>--build-arg</code> values always override those in a
<code>--build-arg-file</code>.</p>
<h4
id="build-contextnamevalue"><strong>--build-context</strong>=<em>name=value</em></h4>
<p>Specify an additional build context using its short name and its
location. Additional build contexts can be referenced in the same manner
as we access different stages in COPY instruction.</p>
<p>Valid values are:</p>
<ul>
<li>Local directory &#x2013; e.g. --build-context
project2=../path/to/project2/src (This option is not available with the
remote Podman client. On Podman machine setup (i.e macOS and Windows)
path must exists on the machine VM)</li>
<li>HTTP URL to a tarball &#x2013; e.g. --build-context
src=https://example.org/releases/src.tar</li>
<li>Container image &#x2013; specified with a container-image:// prefix, e.g.
--build-context alpine=container-image://alpine:3.15, (also accepts
docker://, docker-image://)</li>
</ul>
<p>On the Containerfile side, reference the build context on all
commands that accept the &#x201C;from&#x201D; parameter. Here&#x2019;s how that might
look:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> [name]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> <span class="op">--from=[name]</span> ...</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="op">--mount=from=[name]</span> <span class="ex">&#x2026;</span></span></code></pre></div>
<p>The value of <a href="#name">name</a> is matched with the following
priority order:</p>
<ul>
<li>Named build context defined with --build-context <a
href="#name">name</a>=..</li>
<li>Stage defined with AS <a href="#name">name</a> inside
Containerfile</li>
<li>Image <a href="#name">name</a>, either local or in a remote
registry</li>
</ul>
<h4
id="cache-fromimage"><strong>--cache-from</strong>=<em>image</em></h4>
<p>Repository to utilize as a potential cache source. When specified,
Buildah tries to look for cache images in the specified repository and
attempts to pull cache images instead of actually executing the build
steps locally. Buildah only attempts to pull previously cached images if
they are considered as valid cache hits.</p>
<p>Use the <code>--cache-to</code> option to populate a remote
repository with cache content.</p>
<p>Example</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># populate a cache and also consult it</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">buildah</span> build <span class="at">-t</span> test <span class="at">--layers</span> <span class="at">--cache-to</span> registry/myrepo/cache <span class="at">--cache-from</span> registry/myrepo/cache .</span></code></pre></div>
<p>Note: <code>--cache-from</code> option is ignored unless
<code>--layers</code> is specified.</p>
<h4 id="cache-toimage"><strong>--cache-to</strong>=<em>image</em></h4>
<p>Set this flag to specify a remote repository that is used to store
cache images. Buildah attempts to push newly built cache image to the
remote repository.</p>
<p>Note: Use the <code>--cache-from</code> option in order to use cache
content in a remote repository.</p>
<p>Example</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># populate a cache and also consult it</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">buildah</span> build <span class="at">-t</span> test <span class="at">--layers</span> <span class="at">--cache-to</span> registry/myrepo/cache <span class="at">--cache-from</span> registry/myrepo/cache .</span></code></pre></div>
<p>Note: <code>--cache-to</code> option is ignored unless
<code>--layers</code> is specified.</p>
<h4 id="cache-ttl"><strong>--cache-ttl</strong></h4>
<p>Limit the use of cached images to only consider images with created
timestamps less than <em>duration</em> ago. For example if
<code>--cache-ttl=1h</code> is specified, Buildah considers intermediate
cache images which are created under the duration of one hour, and
intermediate cache images outside this duration is ignored.</p>
<p>Note: Setting <code>--cache-ttl=0</code> manually is equivalent to
using <code>--no-cache</code> in the implementation since this means
that the user does not want to use cache at all.</p>
<h4 id="cap-addcap_xxx"><strong>--cap-add</strong>=<em>CAP_xxx</em></h4>
<p>When executing RUN instructions, run the command specified in the
instruction with the specified capability added to its capability set.
Certain capabilities are granted by default; this option can be used to
add more.</p>
<h4
id="cap-dropcap_xxx"><strong>--cap-drop</strong>=<em>CAP_xxx</em></h4>
<p>When executing RUN instructions, run the command specified in the
instruction with the specified capability removed from its capability
set. The CAP_CHOWN, CAP_DAC_OVERRIDE, CAP_FOWNER, CAP_FSETID, CAP_KILL,
CAP_NET_BIND_SERVICE, CAP_SETFCAP, CAP_SETGID, CAP_SETPCAP, and
CAP_SETUID capabilities are granted by default; this option can be used
to remove them.</p>
<p>If a capability is specified to both the <strong>--cap-add</strong>
and <strong>--cap-drop</strong> options, it is dropped, regardless of
the order in which the options were given.</p>
<h4 id="cert-dirpath"><strong>--cert-dir</strong>=<em>path</em></h4>
<p>Use certificates at <em>path</em> (*.crt, *.cert, *.key) to connect
to the registry. (Default: /etc/containers/certs.d) For details, see
<strong><a
href="https://github.com/containers/image/blob/main/docs/containers-certs.d.5.md">containers-certs.d(5)</a></strong>.
(This option is not available with the remote Podman client, including
Mac and Windows (excluding WSL2) machines)</p>
<h4
id="cgroup-parentpath"><strong>--cgroup-parent</strong>=<em>path</em></h4>
<p>Path to cgroups under which the cgroup for the container is created.
If the path is not absolute, the path is considered to be relative to
the cgroups path of the init process. Cgroups are created if they do not
already exist.</p>
<h4 id="cgroupnshow"><strong>--cgroupns</strong>=<em>how</em></h4>
<p>Sets the configuration for cgroup namespaces when handling
<code>RUN</code> instructions. The configured value can be "" (the empty
string) or "private" to indicate that a new cgroup namespace is created,
or it can be "host" to indicate that the cgroup namespace in which
<code>buildah</code> itself is being run is reused.</p>
<h4 id="cleanup"><strong>--cleanup</strong></h4>
<p>Remove built images from farm nodes on success (Default: false).</p>
<h4 id="compat-volumes"><strong>--compat-volumes</strong></h4>
<p>Handle directories marked using the VOLUME instruction (both in this
build, and those inherited from base images) such that their contents
can only be modified by ADD and COPY instructions. Any changes made in
those locations by RUN instructions will be reverted. Before the
introduction of this option, this behavior was the default, but it is
now disabled by default.</p>
<h4 id="cpp-flagflags"><strong>--cpp-flag</strong>=<em>flags</em></h4>
<p>Set additional flags to pass to the C Preprocessor cpp(1).
Containerfiles ending with a ".in" suffix is preprocessed via cpp(1).
This option can be used to pass additional flags to cpp.Note: You can
also set default CPPFLAGS by setting the BUILDAH_CPPFLAGS environment
variable (e.g., export BUILDAH_CPPFLAGS="-DDEBUG").</p>
<h4
id="cpu-periodlimit"><strong>--cpu-period</strong>=<em>limit</em></h4>
<p>Set the CPU period for the Completely Fair Scheduler (CFS), which is
a duration in microseconds. Once the container's CPU quota is used up,
it will not be scheduled to run until the current period ends. Defaults
to 100000 microseconds.</p>
<p>On some systems, changing the resource limits may not be allowed for
non-root users. For more details, see
https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-limits-fails-with-a-permissions-error</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4 id="cpu-quotalimit"><strong>--cpu-quota</strong>=<em>limit</em></h4>
<p>Limit the CPU Completely Fair Scheduler (CFS) quota.</p>
<p>Limit the container's CPU usage. By default, containers run with the
full CPU resource. The limit is a number in microseconds. If a number is
provided, the container is allowed to use that much CPU time until the
CPU period ends (controllable via <strong>--cpu-period</strong>).</p>
<p>On some systems, changing the resource limits may not be allowed for
non-root users. For more details, see
https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-limits-fails-with-a-permissions-error</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4 id="cpu-shares--cshares"><strong>--cpu-shares</strong>,
<strong>-c</strong>=<em>shares</em></h4>
<p>CPU shares (relative weight).</p>
<p>By default, all containers get the same proportion of CPU cycles.
This proportion can be modified by changing the container's CPU share
weighting relative to the combined weight of all the running containers.
Default weight is <strong>1024</strong>.</p>
<p>The proportion only applies when CPU-intensive processes are running.
When tasks in one container are idle, other containers can use the
left-over CPU time. The actual amount of CPU time varies depending on
the number of containers running on the system.</p>
<p>For example, consider three containers, one has a cpu-share of 1024
and two others have a cpu-share setting of 512. When processes in all
three containers attempt to use 100% of CPU, the first container
receives 50% of the total CPU time. If a fourth container is added with
a cpu-share of 1024, the first container only gets 33% of the CPU. The
remaining containers receive 16.5%, 16.5% and 33% of the CPU.</p>
<p>On a multi-core system, the shares of CPU time are distributed over
all CPU cores. Even if a container is limited to less than 100% of CPU
time, it can use 100% of each individual CPU core.</p>
<p>For example, consider a system with more than three cores. If the
container <em>C0</em> is started with <strong>--cpu-shares=512</strong>
running one process, and another container <em>C1</em> with
<strong>--cpu-shares=1024</strong> running two processes, this can
result in the following division of CPU shares:</p>
<table>
<thead>
<tr class="header">
<th>PID</th>
<th>container</th>
<th>CPU</th>
<th>CPU share</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>100</td>
<td>C0</td>
<td>0</td>
<td>100% of CPU0</td>
</tr>
<tr class="even">
<td>101</td>
<td>C1</td>
<td>1</td>
<td>100% of CPU1</td>
</tr>
<tr class="odd">
<td>102</td>
<td>C1</td>
<td>2</td>
<td>100% of CPU2</td>
</tr>
</tbody>
</table>
<p>On some systems, changing the resource limits may not be allowed for
non-root users. For more details, see
https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-limits-fails-with-a-permissions-error</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4
id="cpuset-cpusnumber"><strong>--cpuset-cpus</strong>=<em>number</em></h4>
<p>CPUs in which to allow execution. Can be specified as a
comma-separated list (e.g. <strong>0,1</strong>), as a range (e.g.
<strong>0-3</strong>), or any combination thereof (e.g.
<strong>0-3,7,11-15</strong>).</p>
<p>On some systems, changing the resource limits may not be allowed for
non-root users. For more details, see
https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-limits-fails-with-a-permissions-error</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4
id="cpuset-memsnodes"><strong>--cpuset-mems</strong>=<em>nodes</em></h4>
<p>Memory nodes (MEMs) in which to allow execution (0-3, 0,1). Only
effective on NUMA systems.</p>
<p>If there are four memory nodes on the system (0-3), use
<strong>--cpuset-mems=0,1</strong> then processes in the container only
uses memory from the first two memory nodes.</p>
<p>On some systems, changing the resource limits may not be allowed for
non-root users. For more details, see
https://github.com/containers/podman/blob/main/troubleshooting.md#26-running-containers-with-resource-limits-fails-with-a-permissions-error</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4 id="created-annotation"><strong>--created-annotation</strong></h4>
<p>Add an image <em>annotation</em> (see also
<strong>--annotation</strong>) to the image metadata setting
"org.opencontainers.image.created" to the current time, or to the
datestamp specified to the <strong>--source-date-epoch</strong> or
<strong>--timestamp</strong> flag, if either was used. If
<em>false</em>, no such annotation will be present in the written
image.</p>
<p>Note: this information is not present in Docker image formats, so it
is discarded when writing images in Docker formats.</p>
<h4
id="credsusernamepassword"><strong>--creds</strong>=<em>[username[:password]]</em></h4>
<p>The [username[:password]] to use to authenticate with the registry,
if required. If one or both values are not supplied, a command line
prompt appears and the value can be entered. The password is entered
without echo.</p>
<p>Note that the specified credentials are only used to authenticate
against target registries. They are not used for mirrors or when the
registry gets rewritten (see
<code>containers-registries.conf(5)</code>); to authenticate against
those consider using a <code>containers-auth.json(5)</code> file.</p>
<h4
id="decryption-keykeypassphrase"><strong>--decryption-key</strong>=<em>key[:passphrase]</em></h4>
<p>The [key[:passphrase]] to be used for decryption of images. Key can
point to keys and/or certificates. Decryption is tried with all keys. If
the key is protected by a passphrase, it is required to be passed in the
argument and omitted otherwise.</p>
<h4
id="devicehost-devicecontainer-devicepermissions"><strong>--device</strong>=<em>host-device[:container-device][:permissions]</em></h4>
<p>Add a host device to the container. Optional <em>permissions</em>
parameter can be used to specify device permissions by combining
<strong>r</strong> for read, <strong>w</strong> for write, and
<strong>m</strong> for <strong>mknod</strong>(2).</p>
<p>Example: <strong>--device=/dev/sdc:/dev/xvdc:rwm</strong>.</p>
<p>Note: if <em>host-device</em> is a symbolic link then it is resolved
first. The container only stores the major and minor numbers of the host
device.</p>
<p>Podman may load kernel modules required for using the specified
device. The devices that Podman loads modules for when necessary are:
/dev/fuse.</p>
<p>In rootless mode, the new device is bind mounted in the container
from the host rather than Podman creating it within the container space.
Because the bind mount retains its SELinux label on SELinux systems, the
container can get permission denied when accessing the mounted device.
Modify SELinux settings to allow containers to use all device labels via
the following command:</p>
<p>$ sudo setsebool -P container_use_devices=true</p>
<p>Note: if the user only has access rights via a group, accessing the
device from inside a rootless container fails. The <strong><a
href="https://github.com/containers/crun/tree/main/crun.html">crun(1)</a></strong>
runtime offers a workaround for this by adding the option
<strong>--annotation run.oci.keep_original_groups=1</strong>.</p>
<h4 id="disable-compression--d"><strong>--disable-compression</strong>,
<strong>-D</strong></h4>
<p>Don't compress filesystem layers when building the image unless it is
required by the location where the image is being written. This is the
default setting, because image layers are compressed automatically when
they are pushed to registries, and images being written to local storage
only need to be decompressed again to be stored. Compression can be
forced in all cases by specifying
<strong>--disable-compression=false</strong>.</p>
<h4 id="dnsipaddr"><strong>--dns</strong>=<em>ipaddr</em></h4>
<p>Set custom DNS servers.</p>
<p>This option can be used to override the DNS configuration passed to
the container. Typically this is necessary when the host DNS
configuration is invalid for the container (e.g.,
<strong>127.0.0.1</strong>). When this is the case the
<strong>--dns</strong> flag is necessary for every run.</p>
<p>The special value <strong>none</strong> can be specified to disable
creation of <em>/etc/resolv.conf</em> in the container by Podman. The
<em>/etc/resolv.conf</em> file in the image is used without changes.</p>
<p>This option cannot be combined with <strong>--network</strong> that
is set to <strong>none</strong>.</p>
<p>Note: this option takes effect only during <em>RUN</em> instructions
in the build. It does not affect <em>/etc/resolv.conf</em> in the final
image.</p>
<h4
id="dns-optionoption"><strong>--dns-option</strong>=<em>option</em></h4>
<p>Set custom DNS options to be used during the build.</p>
<h4
id="dns-searchdomain"><strong>--dns-search</strong>=<em>domain</em></h4>
<p>Set custom DNS search domains to be used during the build.</p>
<h4 id="envenvvalue"><strong>--env</strong>=<em>env[=value]</em></h4>
<p>Add a value (e.g. env=<em>value</em>) to the built image. Can be used
multiple times. If neither <code>=</code> nor a <em>value</em> are
specified, but <em>env</em> is set in the current environment, the value
from the current environment is added to the image. To remove an
environment variable from the built image, use the
<code>--unsetenv</code> option.</p>
<h4 id="farm"><strong>--farm</strong></h4>
<p>This option specifies the name of the farm to be used in the build
process.</p>
<p>This option specifies the name of the farm to be used in the build
process.</p>
<h4 id="file--fcontainerfile"><strong>--file</strong>,
<strong>-f</strong>=<em>Containerfile</em></h4>
<p>Specifies a Containerfile which contains instructions for building
the image, either a local file or an <strong>http</strong> or
<strong>https</strong> URL. If more than one Containerfile is specified,
<em>FROM</em> instructions are only be accepted from the last specified
file.</p>
<p>If a build context is not specified, and at least one Containerfile
is a local file, the directory in which it resides is used as the build
context.</p>
<p>Specifying the option <code>-f -</code> causes the Containerfile
contents to be read from stdin.</p>
<h4 id="force-rm"><strong>--force-rm</strong></h4>
<p>Always remove intermediate containers after a build, even if the
build fails (default true).</p>
<h4 id="format"><strong>--format</strong></h4>
<p>Control the format for the built image's manifest and configuration
data. Recognized formats include <em>oci</em> (OCI image-spec v1.0, the
default) and <em>docker</em> (version 2, using schema format 2 for the
manifest).</p>
<p>Note: You can also override the default format by setting the
BUILDAH_FORMAT environment variable.
<code>export BUILDAH_FORMAT=docker</code></p>
<h4 id="from"><strong>--from</strong></h4>
<p>Overrides the first <code>FROM</code> instruction within the
Containerfile. If there are multiple FROM instructions in a
Containerfile, only the first is changed.</p>
<p>With the remote podman client, not all container transports work as
expected. For example, oci-archive:/x.tar references /x.tar on the
remote machine instead of on the client. When using podman remote
clients it is best to restrict use to <em>containers-storage</em>, and
<em>docker:// transports</em>.</p>
<h4
id="group-addgroup-keep-groups"><strong>--group-add</strong>=<em>group</em>
| <em>keep-groups</em></h4>
<p>Assign additional groups to the primary user running within the
container process.</p>
<ul>
<li><code>keep-groups</code> is a special flag that tells Podman to keep
the supplementary group access.</li>
</ul>
<p>Allows container to use the user's supplementary group access. If
file systems or devices are only accessible by the rootless user's
group, this flag tells the OCI runtime to pass the group access into the
container. Currently only available with the <code>crun</code> OCI
runtime. Note: <code>keep-groups</code> is exclusive, other groups
cannot be specified with this flag. (Not available for remote commands,
including Mac and Windows (excluding WSL2) machines)</p>
<h4 id="help--h"><strong>--help</strong>, <strong>-h</strong></h4>
<p>Print usage statement</p>
<h4 id="hooks-dirpath"><strong>--hooks-dir</strong>=<em>path</em></h4>
<p>Each *.json file in the path configures a hook for buildah build
containers. For more details on the syntax of the JSON files and the
semantics of hook injection. Buildah currently support both the 1.0.0
and 0.1.0 hook schemas, although the 0.1.0 schema is deprecated.</p>
<p>This option may be set multiple times; paths from later options have
higher precedence.</p>
<p>For the annotation conditions, buildah uses any annotations set in
the generated OCI configuration.</p>
<p>For the bind-mount conditions, only mounts explicitly requested by
the caller via --volume are considered. Bind mounts that buildah inserts
by default (e.g. /dev/shm) are not considered.</p>
<p>If --hooks-dir is unset for root callers, Buildah currently defaults
to /usr/share/containers/oci/hooks.d and /etc/containers/oci/hooks.d in
order of increasing precedence. Using these defaults is deprecated.
Migrate to explicitly setting --hooks-dir.</p>
<h4 id="http-proxy"><strong>--http-proxy</strong></h4>
<p>By default proxy environment variables are passed into the container
if set for the Podman process. This can be disabled by setting the value
to <strong>false</strong>. The environment variables passed in include
<strong>http_proxy</strong>, <strong>https_proxy</strong>,
<strong>ftp_proxy</strong>, <strong>no_proxy</strong>, and also the
upper case versions of those. This option is only needed when the host
system must use a proxy but the container does not use any proxy. Proxy
environment variables specified for the container in any other way
overrides the values that have been passed through from the host. (Other
ways to specify the proxy for the container include passing the values
with the <strong>--env</strong> flag, or hard coding the proxy
environment at container build time.) When used with the remote client
it uses the proxy environment variables that are set on the server
process.</p>
<p>Defaults to <strong>true</strong>.</p>
<h4 id="identity-label"><strong>--identity-label</strong></h4>
<p>Adds default identity label <code>io.buildah.version</code> if set.
(default true).</p>
<h4 id="ignorefile"><strong>--ignorefile</strong></h4>
<p>Path to an alternative .containerignore file.</p>
<h4
id="iidfileimageidfile"><strong>--iidfile</strong>=<em>ImageIDfile</em></h4>
<p>Write the built image's ID to the file. When <code>--platform</code>
is specified more than once, attempting to use this option triggers an
error.</p>
<h4
id="inherit-annotationsbool-value"><strong>--inherit-annotations</strong>=<em>bool-value</em></h4>
<p>Inherit the annotations from the base image or base stages. (default
true). Use cases which set this flag to <em>false</em> may need to do
the same for the <strong>--created-annotation</strong> flag.</p>
<h4 id="inherit-labels"><strong>--inherit-labels</strong></h4>
<p>Inherit the labels from the base image or base stages. (default
true).</p>
<h4 id="ipchow"><strong>--ipc</strong>=<em>how</em></h4>
<p>Sets the configuration for IPC namespaces when handling
<code>RUN</code> instructions. The configured value can be "" (the empty
string) or "container" to indicate that a new IPC namespace is created,
or it can be "host" to indicate that the IPC namespace in which
<code>podman</code> itself is being run is reused, or it can be the path
to an IPC namespace which is already in use by another process.</p>
<h4 id="isolationtype"><strong>--isolation</strong>=<em>type</em></h4>
<p>Controls what type of isolation is used for running processes as part
of <code>RUN</code> instructions. Recognized types include <em>oci</em>
(OCI-compatible runtime, the default), <em>rootless</em> (OCI-compatible
runtime invoked using a modified configuration and its --rootless option
enabled, with <em>--no-new-keyring --no-pivot</em> added to its
<em>create</em> invocation, with network and UTS namespaces disabled,
and IPC, PID, and user namespaces enabled; the default for unprivileged
users), and <em>chroot</em> (an internal wrapper that leans more toward
chroot(1) than container technology).</p>
<p>Note: You can also override the default isolation type by setting the
BUILDAH_ISOLATION environment variable.
<code>export BUILDAH_ISOLATION=oci</code></p>
<h4 id="jobsnumber"><strong>--jobs</strong>=<em>number</em></h4>
<p>Run up to N concurrent stages in parallel. If the number of jobs is
greater than 1, stdin is read from /dev/null. If 0 is specified, then
there is no limit in the number of jobs that run in parallel.</p>
<h4 id="labellabel"><strong>--label</strong>=<em>label</em></h4>
<p>Add an image <em>label</em> (e.g. label=<em>value</em>) to the image
metadata. Can be used multiple times.</p>
<p>Users can set a special LABEL
<strong>io.containers.capabilities=CAP1,CAP2,CAP3</strong> in a
Containerfile that specifies the list of Linux capabilities required for
the container to run properly. This label specified in a container image
tells Podman to run the container with just these capabilities. Podman
launches the container with just the specified capabilities, as long as
this list of capabilities is a subset of the default list.</p>
<p>If the specified capabilities are not in the default set, Podman
prints an error message and runs the container with the default
capabilities.</p>
<h4
id="layer-labellabelvalue"><strong>--layer-label</strong>=<em>label[=value]</em></h4>
<p>Add an intermediate image <em>label</em> (e.g. label=<em>value</em>)
to the intermediate image metadata. It can be used multiple times.</p>
<p>If <em>label</em> is named, but neither <code>=</code> nor a
<code>value</code> is provided, then the <em>label</em> is set to an
empty value.</p>
<h4 id="layers"><strong>--layers</strong></h4>
<p>Cache intermediate images during the build process (Default is
<code>true</code>).</p>
<p>Note: You can also override the default value of layers by setting
the BUILDAH_LAYERS environment variable.
<code>export BUILDAH_LAYERS=true</code></p>
<h4 id="local--l"><strong>--local</strong>, <strong>-l</strong></h4>
<p>Build image on local machine as well as on farm nodes.</p>
<h4
id="logfilefilename"><strong>--logfile</strong>=<em>filename</em></h4>
<p>Log output which is sent to standard output and standard error to the
specified file instead of to standard output and standard error. This
option is not supported on the remote client, including Mac and Windows
(excluding WSL2) machines.</p>
<h4 id="memory--mnumberunit"><strong>--memory</strong>,
<strong>-m</strong>=<em>number[unit]</em></h4>
<p>Memory limit. A <em>unit</em> can be <strong>b</strong> (bytes),
<strong>k</strong> (kibibytes), <strong>m</strong> (mebibytes), or
<strong>g</strong> (gibibytes).</p>
<p>Allows the memory available to a container to be constrained. If the
host supports swap memory, then the <strong>-m</strong> memory setting
can be larger than physical RAM. If a limit of 0 is specified (not using
<strong>-m</strong>), the container's memory is not limited. The actual
limit may be rounded up to a multiple of the operating system's page
size (the value is very large, that's millions of trillions).</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4
id="memory-swapnumberunit"><strong>--memory-swap</strong>=<em>number[unit]</em></h4>
<p>A limit value equal to memory plus swap. A <em>unit</em> can be
<strong>b</strong> (bytes), <strong>k</strong> (kibibytes),
<strong>m</strong> (mebibytes), or <strong>g</strong> (gibibytes).</p>
<p>Must be used with the <strong>-m</strong> (<strong>--memory</strong>)
flag. The argument value must be larger than that of <strong>-m</strong>
(<strong>--memory</strong>) By default, it is set to double the value of
<strong>--memory</strong>.</p>
<p>Set <em>number</em> to <strong>-1</strong> to enable unlimited
swap.</p>
<p>This option is not supported on cgroups V1 rootless systems.</p>
<h4 id="networkmode---net"><strong>--network</strong>=<em>mode</em>,
<strong>--net</strong></h4>
<p>Sets the configuration for network namespaces when handling
<code>RUN</code> instructions.</p>
<p>Valid <em>mode</em> values are:</p>
<ul>
<li><strong>none</strong>: no networking.</li>
<li><strong>host</strong>: use the Podman host network stack. Note: the
host mode gives the container full access to local system services such
as D-bus and is therefore considered insecure.</li>
<li><strong>ns:</strong>_path_: path to a network namespace to
join.</li>
<li><strong>private</strong>: create a new namespace for the container
(default)</li>
<li><strong>&lt;network name|ID&gt;</strong>: Join the network with the
given name or ID, e.g. use <code>--network mynet</code> to join the
network with the name mynet. Only supported for rootful users.</li>
<li><strong>slirp4netns[:OPTIONS,...]</strong>: use
<strong>slirp4netns</strong>(1) to create a user network stack. It is
possible to specify these additional options, they can also be set with
<code>network_cmd_options</code> in containers.conf:
<ul>
<li><strong>allow_host_loopback=true|false</strong>: Allow slirp4netns
to reach the host loopback IP (default is 10.0.2.2 or the second IP from
slirp4netns cidr subnet when changed, see the cidr option below). The
default is false.</li>
<li><strong>mtu=MTU</strong>: Specify the MTU to use for this network.
(Default is <code>65520</code>).</li>
<li><strong>cidr=CIDR</strong>: Specify ip range to use for this
network. (Default is <code>10.0.2.0/24</code>).</li>
<li><strong>enable_ipv6=true|false</strong>: Enable IPv6. Default is
true. (Required for <code>outbound_addr6</code>).</li>
<li><strong>outbound_addr=INTERFACE</strong>: Specify the outbound
interface slirp binds to (ipv4 traffic only).</li>
<li><strong>outbound_addr=IPv4</strong>: Specify the outbound ipv4
address slirp binds to.</li>
<li><strong>outbound_addr6=INTERFACE</strong>: Specify the outbound
interface slirp binds to (ipv6 traffic only).</li>
<li><strong>outbound_addr6=IPv6</strong>: Specify the outbound ipv6
address slirp binds to.</li>
</ul></li>
<li><strong>pasta[:OPTIONS,...]</strong>: use <strong>pasta</strong>(1)
to create a user-mode networking stack.<br />
This is the default for rootless containers and only supported in
rootless mode.<br />
By default, IPv4 and IPv6 addresses and routes, as well as the pod
interface name, are copied from the host. If port forwarding isn't
configured, ports are forwarded dynamically as services are bound on
either side (init namespace or container namespace). Port forwarding
preserves the original source IP address. Options described in pasta(1)
can be specified as comma-separated arguments.<br />
In terms of pasta(1) options, <strong>--config-net</strong> is given by
default, in order to configure networking when the container is started,
and <strong>--no-map-gw</strong> is also assumed by default, to avoid
direct access from container to host using the gateway address. The
latter can be overridden by passing <strong>--map-gw</strong> in the
pasta-specific options (despite not being an actual pasta(1)
option).<br />
Also, <strong>-t none</strong> and <strong>-u none</strong> are passed
to disable automatic port forwarding based on bound ports. Similarly,
<strong>-T none</strong> and <strong>-U none</strong> are given to
disable the same functionality from container to host.<br />
Some examples:
<ul>
<li><strong>pasta:--map-gw</strong>: Allow the container to directly
reach the host using the gateway address.</li>
<li><strong>pasta:--mtu,1500</strong>: Specify a 1500 bytes MTU for the
<em>tap</em> interface in the container.</li>
<li><strong>pasta:--ipv4-only,-a,10.0.2.0,-n,24,-g,10.0.2.2,--dns-forward,10.0.2.3,-m,1500,--no-ndp,--no-dhcpv6,--no-dhcp</strong>,
equivalent to default slirp4netns(1) options: disable IPv6, assign
<code>10.0.2.0/24</code> to the <code>tap0</code> interface in the
container, with gateway <code>10.0.2.3</code>, enable DNS forwarder
reachable at <code>10.0.2.3</code>, set MTU to 1500 bytes, disable NDP,
DHCPv6 and DHCP support.</li>
<li><strong>pasta:-I,tap0,--ipv4-only,-a,10.0.2.0,-n,24,-g,10.0.2.2,--dns-forward,10.0.2.3,--no-ndp,--no-dhcpv6,--no-dhcp</strong>,
equivalent to default slirp4netns(1) options with Podman overrides: same
as above, but leave the MTU to 65520 bytes</li>
<li><strong>pasta:-t,auto,-u,auto,-T,auto,-U,auto</strong>: enable
automatic port forwarding based on observed bound ports from both host
and container sides</li>
<li><strong>pasta:-T,5201</strong>: enable forwarding of TCP port 5201
from container to host, using the loopback interface instead of the tap
interface for improved performance</li>
</ul></li>
</ul>
<h4 id="no-cache"><strong>--no-cache</strong></h4>
<p>Do not use existing cached images for the container build. Build from
the start with a new set of cached layers.</p>
<h4 id="no-hostname"><strong>--no-hostname</strong></h4>
<p>Do not create the <em>/etc/hostname</em> file in the containers.</p>
<p>By default, Podman manages the <em>/etc/hostname</em> file, adding
the container's own hostname. When the <strong>--no-hostname</strong>
option is set, the image's <em>/etc/hostname</em> will be preserved
unmodified if it exists.</p>
<h4 id="no-hosts"><strong>--no-hosts</strong></h4>
<p>Do not modify the <code>/etc/hosts</code> file in the container.</p>
<p>Podman assumes control over the container's <code>/etc/hosts</code>
file by default and adds entries for the container's name (see
<strong>--name</strong> option) and hostname (see
<strong>--hostname</strong> option), the internal
<code>host.containers.internal</code> and
<code>host.docker.internal</code> hosts, as well as any hostname added
using the <strong>--add-host</strong> option. Refer to the
<strong>--add-host</strong> option for details. Passing
<strong>--no-hosts</strong> disables this, so that the image's
<code>/etc/hosts</code> file is kept unmodified. The same can be
achieved globally by setting <em>no_hosts=true</em> in
<code>containers.conf</code>.</p>
<p>This option conflicts with <strong>--add-host</strong>.</p>
<h4 id="omit-history"><strong>--omit-history</strong></h4>
<p>Omit build history information in the built image. (default
false).</p>
<p>This option is useful for the cases where end users explicitly want
to set <code>--omit-history</code> to omit the optional
<code>History</code> from built images or when working with images built
using build tools that do not include <code>History</code> information
in their images.</p>
<h4
id="os-featurefeature"><strong>--os-feature</strong>=<em>feature</em></h4>
<p>Set the name of a required operating system <em>feature</em> for the
image which is built. By default, if the image is not based on
<em>scratch</em>, the base image's required OS feature list is kept, if
the base image specified any. This option is typically only meaningful
when the image's OS is Windows.</p>
<p>If <em>feature</em> has a trailing <code>-</code>, then the
<em>feature</em> is removed from the set of required features which is
listed in the image.</p>
<h4
id="os-versionversion"><strong>--os-version</strong>=<em>version</em></h4>
<p>Set the exact required operating system <em>version</em> for the
image which is built. By default, if the image is not based on
<em>scratch</em>, the base image's required OS version is kept, if the
base image specified one. This option is typically only meaningful when
the image's OS is Windows, and is typically set in Windows base images,
so using this option is usually unnecessary.</p>
<h4 id="pidpid"><strong>--pid</strong>=<em>pid</em></h4>
<p>Sets the configuration for PID namespaces when handling
<code>RUN</code> instructions. The configured value can be "" (the empty
string) or "container" to indicate that a new PID namespace is created,
or it can be "host" to indicate that the PID namespace in which
<code>podman</code> itself is being run is reused, or it can be the path
to a PID namespace which is already in use by another process.</p>
<h4
id="platformsp1p2p3..."><strong>--platforms</strong>=<em>p1,p2,p3...</em></h4>
<p>Build only on farm nodes that match the given platforms.</p>
<h4 id="pullpolicy"><strong>--pull</strong>=<em>policy</em></h4>
<p>Pull image policy. The default is <strong>missing</strong>.</p>
<ul>
<li><strong>always</strong>: Always pull the image and throw an error if
the pull fails.</li>
<li><strong>missing</strong>: Only pull the image when it does not exist
in the local containers storage. Throw an error if no image is found and
the pull fails.</li>
<li><strong>never</strong>: Never pull the image but use the one from
the local containers storage. Throw an error when no image is
found.</li>
<li><strong>newer</strong>: Pull if the image on the registry is newer
than the one in the local containers storage. An image is considered to
be newer when the digests are different. Comparing the time stamps is
prone to errors. Pull errors are suppressed if a local image was
found.</li>
</ul>
<h4 id="quiet--q"><strong>--quiet</strong>, <strong>-q</strong></h4>
<p>Suppress output messages which indicate which instruction is being
processed, and of progress when pulling images from a registry, and when
writing the output image.</p>
<h4 id="retryattempts"><strong>--retry</strong>=<em>attempts</em></h4>
<p>Number of times to retry pulling or pushing images between the
registry and local storage in case of failure. Default is
<strong>3</strong>.</p>
<h4
id="retry-delayduration"><strong>--retry-delay</strong>=<em>duration</em></h4>
<p>Duration of delay between retry attempts when pulling or pushing
images between the registry and local storage in case of failure. The
default is to start at two seconds and then exponentially back off. The
delay is used when this value is set, and no exponential back off
occurs.</p>
<h4 id="rewrite-timestamp"><strong>--rewrite-timestamp</strong></h4>
<p>When generating new layers for the image, ensure that no newly added
content bears a timestamp later than the value used by the
<strong>--source-date-epoch</strong> flag, if one was provided, by
replacing any timestamps which are later than that value, with that
value.</p>
<h4 id="rm"><strong>--rm</strong></h4>
<p>Remove intermediate containers after a successful build (default
true).</p>
<h4 id="runtimepath"><strong>--runtime</strong>=<em>path</em></h4>
<p>The <em>path</em> to an alternate OCI-compatible runtime, which is
used to run commands specified by the <strong>RUN</strong>
instruction.</p>
<p>Note: You can also override the default runtime by setting the
BUILDAH_RUNTIME environment variable.
<code>export BUILDAH_RUNTIME=/usr/local/bin/runc</code></p>
<h4
id="runtime-flagflag"><strong>--runtime-flag</strong>=<em>flag</em></h4>
<p>Adds global flags for the container runtime. To list the supported
flags, please consult the manpages of the selected container
runtime.</p>
<p>Note: Do not pass the leading -- to the flag. To pass the runc flag
--log-format json to buildah build, the option given is --runtime-flag
log-format=json.</p>
<h4 id="sbompreset"><strong>--sbom</strong>=<em>preset</em></h4>
<p>Generate SBOMs (Software Bills Of Materials) for the output image by
scanning the working container and build contexts using the named
combination of scanner image, scanner commands, and merge strategy. Must
be specified with one or more of <strong>--sbom-image-output</strong>,
<strong>--sbom-image-purl-output</strong>,
<strong>--sbom-output</strong>, and <strong>--sbom-purl-output</strong>.
Recognized presets, and the set of options which they equate to:</p>
<ul>
<li>"syft", "syft-cyclonedx": --sbom-scanner-image=ghcr.io/anchore/syft
--sbom-scanner-command="/syft scan -q dir:{ROOTFS} --output
cyclonedx-json={OUTPUT}" --sbom-scanner-command="/syft scan -q
dir:{CONTEXT} --output cyclonedx-json={OUTPUT}"
--sbom-merge-strategy=merge-cyclonedx-by-component-name-and-version</li>
<li>"syft-spdx": --sbom-scanner-image=ghcr.io/anchore/syft
--sbom-scanner-command="/syft scan -q dir:{ROOTFS} --output
spdx-json={OUTPUT}" --sbom-scanner-command="/syft scan -q dir:{CONTEXT}
--output spdx-json={OUTPUT}"
--sbom-merge-strategy=merge-spdx-by-package-name-and-versioninfo</li>
<li>"trivy", "trivy-cyclonedx":
--sbom-scanner-image=ghcr.io/aquasecurity/trivy
--sbom-scanner-command="trivy filesystem -q {ROOTFS} --format cyclonedx
--output {OUTPUT}" --sbom-scanner-command="trivy filesystem -q {CONTEXT}
--format cyclonedx --output {OUTPUT}"
--sbom-merge-strategy=merge-cyclonedx-by-component-name-and-version</li>
<li>"trivy-spdx": --sbom-scanner-image=ghcr.io/aquasecurity/trivy
--sbom-scanner-command="trivy filesystem -q {ROOTFS} --format spdx-json
--output {OUTPUT}" --sbom-scanner-command="trivy filesystem -q {CONTEXT}
--format spdx-json --output {OUTPUT}"
--sbom-merge-strategy=merge-spdx-by-package-name-and-versioninfo</li>
</ul>
<h4
id="sbom-image-outputpath"><strong>--sbom-image-output</strong>=<em>path</em></h4>
<p>When generating SBOMs, store the generated SBOM in the specified path
in the output image. There is no default.</p>
<h4
id="sbom-image-purl-outputpath"><strong>--sbom-image-purl-output</strong>=<em>path</em></h4>
<p>When generating SBOMs, scan them for PURL (<a
href="https://github.com/package-url/purl-spec/blob/master/PURL-SPECIFICATION.rst">package
URL</a>) information, and save a list of found PURLs to the specified
path in the output image. There is no default.</p>
<h4
id="sbom-merge-strategymethod"><strong>--sbom-merge-strategy</strong>=<em>method</em></h4>
<p>If more than one <strong>--sbom-scanner-command</strong> value is
being used, use the specified method to merge the output from later
commands with output from earlier commands. Recognized values
include:</p>
<ul>
<li>cat Concatenate the files.</li>
<li>merge-cyclonedx-by-component-name-and-version Merge the "component"
fields of JSON documents, ignoring values from documents when the
combination of their "name" and "version" values is already present.
Documents are processed in the order in which they are generated, which
is the order in which the commands that generate them were
specified.</li>
<li>merge-spdx-by-package-name-and-versioninfo Merge the "package"
fields of JSON documents, ignoring values from documents when the
combination of their "name" and "versionInfo" values is already present.
Documents are processed in the order in which they are generated, which
is the order in which the commands that generate them were
specified.</li>
</ul>
<h4
id="sbom-outputfile"><strong>--sbom-output</strong>=<em>file</em></h4>
<p>When generating SBOMs, store the generated SBOM in the named file on
the local filesystem. There is no default.</p>
<h4
id="sbom-purl-outputfile"><strong>--sbom-purl-output</strong>=<em>file</em></h4>
<p>When generating SBOMs, scan them for PURL (<a
href="https://github.com/package-url/purl-spec/blob/master/PURL-SPECIFICATION.rst">package
URL</a>) information, and save a list of found PURLs to the named file
in the local filesystem. There is no default.</p>
<h4
id="sbom-scanner-commandimage"><strong>--sbom-scanner-command</strong>=<em>image</em></h4>
<p>Generate SBOMs by running the specified command from the scanner
image. If multiple commands are specified, they are run in the order in
which they are specified. These text substitutions are performed: -
{ROOTFS} The root of the built image's filesystem, bind mounted. -
{CONTEXT} The build context and additional build contexts, bind mounted.
- {OUTPUT} The name of a temporary output file, to be read and merged
with others or copied elsewhere.</p>
<h4
id="sbom-scanner-imageimage"><strong>--sbom-scanner-image</strong>=<em>image</em></h4>
<p>Generate SBOMs using the specified scanner image.</p>
<h4
id="secretididsrcenvorfileenvenvtypefile-env"><strong>--secret</strong>=<strong>id=id[,src=<em>envOrFile</em>][,env=<em>ENV</em>][,type=<em>file</em>
| <em>env</em>]</strong></h4>
<p>Pass secret information to be used in the Containerfile for building
images in a safe way that will not end up stored in the final image, or
be seen in other stages. The value of the secret will be read from an
environment variable or file named by the "id" option, or named by the
"src" option if it is specified, or from an environment variable
specified by the "env" option. See <a href="#examples">EXAMPLES</a>. The
secret will be mounted in the container at <code>/run/secrets/id</code>
by default.</p>
<p>To later use the secret, use the --mount flag in a <code>RUN</code>
instruction within a <code>Containerfile</code>:</p>
<p><code>RUN --mount=type=secret,id=mysecret cat /run/secrets/mysecret</code></p>
<p>The location of the secret in the container can be overridden using
the "target", "dst", or "destination" option of the
<code>RUN --mount</code> flag.</p>
<p><code>RUN --mount=type=secret,id=mysecret,target=/run/secrets/myothersecret cat /run/secrets/myothersecret</code></p>
<p>Note: changing the contents of secret files will not trigger a
rebuild of layers that use said secrets.</p>
<h4
id="security-optoption"><strong>--security-opt</strong>=<em>option</em></h4>
<p>Security Options</p>
<ul>
<li><p><code>apparmor=unconfined</code> : Turn off apparmor confinement
for the container</p></li>
<li><p><code>apparmor=alternate-profile</code> : Set the apparmor
confinement profile for the container</p></li>
<li><p><code>label=user:USER</code> : Set the label user for the
container processes</p></li>
<li><p><code>label=role:ROLE</code> : Set the label role for the
container processes</p></li>
<li><p><code>label=type:TYPE</code> : Set the label process type for the
container processes</p></li>
<li><p><code>label=level:LEVEL</code> : Set the label level for the
container processes</p></li>
<li><p><code>label=filetype:TYPE</code> : Set the label file type for
the container files</p></li>
<li><p><code>label=disable</code> : Turn off label separation for the
container</p></li>
<li><p><code>no-new-privileges</code> : Disable container processes from
gaining additional privileges</p></li>
<li><p><code>seccomp=unconfined</code> : Turn off seccomp confinement
for the container</p></li>
<li><p><code>seccomp=profile.json</code> : JSON file to be used as the
seccomp filter for the container.</p></li>
</ul>
<h4
id="shm-sizenumberunit"><strong>--shm-size</strong>=<em>number[unit]</em></h4>
<p>Size of <em>/dev/shm</em>. A <em>unit</em> can be <strong>b</strong>
(bytes), <strong>k</strong> (kibibytes), <strong>m</strong> (mebibytes),
or <strong>g</strong> (gibibytes). If the unit is omitted, the system
uses bytes. If the size is omitted, the default is <strong>64m</strong>.
When <em>size</em> is <strong>0</strong>, there is no limit on the
amount of memory used for IPC by the container. This option conflicts
with <strong>--ipc=host</strong>.</p>
<h4 id="skip-unused-stages"><strong>--skip-unused-stages</strong></h4>
<p>Skip stages in multi-stage builds which don't affect the target
stage. (Default: <strong>true</strong>).</p>
<h4
id="source-date-epochseconds"><strong>--source-date-epoch</strong>=<em>seconds</em></h4>
<p>Set the "created" timestamp for the built image to this number of
seconds since the epoch (Unix time 0, i.e., 00:00:00 UTC on 1 January
1970) (default is to use the value set in the
<code>SOURCE_DATE_EPOCH</code> environment variable, or the current time
if it is not set).</p>
<p>The "created" timestamp is written into the image's configuration and
manifest when the image is committed, so running the same build two
different times will ordinarily produce images with different sha256
hashes, even if no other changes were made to the Containerfile and
build context.</p>
<p>When this flag is set, a <code>SOURCE_DATE_EPOCH</code> build arg
will provide its value for a stage in which it is declared.</p>
<p>When this flag is set, the image configuration's "created" timestamp
is always set to the time specified, which should allow for identical
images to be built at different times using the same set of inputs.</p>
<p>When this flag is set, output written as specified to the
<strong>--output</strong> flag will bear exactly the specified
timestamp.</p>
<p>Conflicts with the similar <strong>--timestamp</strong> flag, which
also sets its specified time on the contents of new layers.</p>
<h4 id="squash"><strong>--squash</strong></h4>
<p>Squash all of the image's new layers into a single new layer; any
preexisting layers are not squashed.</p>
<h4 id="squash-all"><strong>--squash-all</strong></h4>
<p>Squash all of the new image's layers (including those inherited from
a base image) into a single new layer.</p>
<h4 id="sshdefault-idsocket"><strong>--ssh</strong>=<em>default</em> |
<em>id[=socket&gt;</em></h4>
<p>SSH agent socket or keys to expose to the build. The socket path can
be left empty to use the value of
<code>default=$SSH_AUTH_SOCK</code></p>
<p>To later use the ssh agent, use the --mount option in a
<code>RUN</code> instruction within a <code>Containerfile</code>:</p>
<p><code>RUN --mount=type=ssh,id=id mycmd</code></p>
<h4 id="tag--timagename"><strong>--tag</strong>,
<strong>-t</strong>=<em>imageName</em></h4>
<p>Specifies the name which is assigned to the resulting image if the
build process completes successfully. If <em>imageName</em> does not
include a registry name, the registry name <em>localhost</em> is
prepended to the image name.</p>
<h4
id="targetstagename"><strong>--target</strong>=<em>stageName</em></h4>
<p>Set the target build stage to build. When building a Containerfile
with multiple build stages, --target can be used to specify an
intermediate build stage by name as the final stage for the resulting
image. Commands after the target stage is skipped.</p>
<h4
id="timestampseconds"><strong>--timestamp</strong>=<em>seconds</em></h4>
<p>Set the create timestamp to seconds since epoch to allow for
deterministic builds (defaults to current time). By default, the created
timestamp is changed and written into the image manifest with every
commit, causing the image's sha256 hash to be different even if the
sources are exactly the same otherwise. When --timestamp is set, the
created timestamp is always set to the time specified and therefore not
changed, allowing the image's sha256 hash to remain the same. All files
committed to the layers of the image is created with the timestamp.</p>
<p>If the only instruction in a Containerfile is <code>FROM</code>, this
flag has no effect.</p>
<h4 id="tls-verify"><strong>--tls-verify</strong></h4>
<p>Require HTTPS and verify certificates when contacting registries
(default: <strong>true</strong>). If explicitly set to
<strong>true</strong>, TLS verification is used. If set to
<strong>false</strong>, TLS verification is not used. If not specified,
TLS verification is used unless the target registry is listed as an
insecure registry in <strong><a
href="https://github.com/containers/image/blob/main/docs/containers-registries.conf.5.md">containers-registries.conf(5)</a></strong></p>
<h4
id="ulimittypesoft-limithard-limit"><strong>--ulimit</strong>=<em>type=soft-limit[:hard-limit]</em></h4>
<p>Specifies resource limits to apply to processes launched when
processing <code>RUN</code> instructions. This option can be specified
multiple times. Recognized resource types include: "core": maximum core
dump size (ulimit -c) "cpu": maximum CPU time (ulimit -t) "data":
maximum size of a process's data segment (ulimit -d) "fsize": maximum
size of new files (ulimit -f) "locks": maximum number of file locks
(ulimit -x) "memlock": maximum amount of locked memory (ulimit -l)
"msgqueue": maximum amount of data in message queues (ulimit -q) "nice":
niceness adjustment (nice -n, ulimit -e) "nofile": maximum number of
open files (ulimit -n) "nproc": maximum number of processes (ulimit -u)
"rss": maximum size of a process's (ulimit -m) "rtprio": maximum
real-time scheduling priority (ulimit -r) "rttime": maximum amount of
real-time execution between blocking syscalls "sigpending": maximum
number of pending signals (ulimit -i) "stack": maximum stack size
(ulimit -s)</p>
<h4
id="unsetannotationannotation"><strong>--unsetannotation</strong>=<em>annotation</em></h4>
<p>Unset the image annotation, causing the annotation not to be
inherited from the base image.</p>
<h4 id="unsetenvenv"><strong>--unsetenv</strong>=<em>env</em></h4>
<p>Unset environment variables from the final image.</p>
<h4
id="unsetlabellabel"><strong>--unsetlabel</strong>=<em>label</em></h4>
<p>Unset the image label, causing the label not to be inherited from the
base image.</p>
<h4 id="usernshow"><strong>--userns</strong>=<em>how</em></h4>
<p>Sets the configuration for user namespaces when handling
<code>RUN</code> instructions. The configured value can be "" (the empty
string) or "container" to indicate that a new user namespace is created,
it can be "host" to indicate that the user namespace in which
<code>podman</code> itself is being run is reused, or it can be the path
to a user namespace which is already in use by another process.</p>
<h4
id="userns-gid-mapmapping"><strong>--userns-gid-map</strong>=<em>mapping</em></h4>
<p>Directly specifies a GID mapping to be used to set ownership, at the
filesystem level, on the working container's contents. Commands run when
handling <code>RUN</code> instructions defaults to being run in their
own user namespaces, configured using the UID and GID maps.</p>
<p>Entries in this map take the form of one or more triples of a
starting in-container GID, a corresponding starting host-level GID, and
the number of consecutive IDs which the map entry represents.</p>
<p>This option overrides the <em>remap-gids</em> setting in the
<em>options</em> section of /etc/containers/storage.conf.</p>
<p>If this option is not specified, but a global --userns-gid-map
setting is supplied, settings from the global option is used.</p>
<p>If none of --userns-uid-map-user, --userns-gid-map-group, or
--userns-gid-map are specified, but --userns-uid-map is specified, the
GID map is set to use the same numeric values as the UID map.</p>
<h4
id="userns-gid-map-groupgroup"><strong>--userns-gid-map-group</strong>=<em>group</em></h4>
<p>Specifies that a GID mapping to be used to set ownership, at the
filesystem level, on the working container's contents, can be found in
entries in the <code>/etc/subgid</code> file which correspond to the
specified group. Commands run when handling <code>RUN</code>
instructions defaults to being run in their own user namespaces,
configured using the UID and GID maps. If --userns-uid-map-user is
specified, but --userns-gid-map-group is not specified,
<code>podman</code> assumes that the specified user name is also a
suitable group name to use as the default setting for this option.</p>
<p><strong>NOTE:</strong> When this option is specified by a rootless
user, the specified mappings are relative to the rootless user namespace
in the container, rather than being relative to the host as it is when
run rootful.</p>
<h4
id="userns-uid-mapmapping"><strong>--userns-uid-map</strong>=<em>mapping</em></h4>
<p>Directly specifies a UID mapping to be used to set ownership, at the
filesystem level, on the working container's contents. Commands run when
handling <code>RUN</code> instructions default to being run in their own
user namespaces, configured using the UID and GID maps.</p>
<p>Entries in this map take the form of one or more triples of a
starting in-container UID, a corresponding starting host-level UID, and
the number of consecutive IDs which the map entry represents.</p>
<p>This option overrides the <em>remap-uids</em> setting in the
<em>options</em> section of /etc/containers/storage.conf.</p>
<p>If this option is not specified, but a global --userns-uid-map
setting is supplied, settings from the global option is used.</p>
<p>If none of --userns-uid-map-user, --userns-gid-map-group, or
--userns-uid-map are specified, but --userns-gid-map is specified, the
UID map is set to use the same numeric values as the GID map.</p>
<h4
id="userns-uid-map-useruser"><strong>--userns-uid-map-user</strong>=<em>user</em></h4>
<p>Specifies that a UID mapping to be used to set ownership, at the
filesystem level, on the working container's contents, can be found in
entries in the <code>/etc/subuid</code> file which correspond to the
specified user. Commands run when handling <code>RUN</code> instructions
defaults to being run in their own user namespaces, configured using the
UID and GID maps. If --userns-gid-map-group is specified, but
--userns-uid-map-user is not specified, <code>podman</code> assumes that
the specified group name is also a suitable user name to use as the
default setting for this option.</p>
<p><strong>NOTE:</strong> When this option is specified by a rootless
user, the specified mappings are relative to the rootless user namespace
in the container, rather than being relative to the host as it is when
run rootful.</p>
<h4 id="utshow"><strong>--uts</strong>=<em>how</em></h4>
<p>Sets the configuration for UTS namespaces when handling
<code>RUN</code> instructions. The configured value can be "" (the empty
string) or "container" to indicate that a new UTS namespace to be
created, or it can be "host" to indicate that the UTS namespace in which
<code>podman</code> itself is being run is reused, or it can be the path
to a UTS namespace which is already in use by another process.</p>
<h4
id="volume--vhost-dircontainer-diroptions"><strong>--volume</strong>,
<strong>-v</strong>=<em>[HOST-DIR:CONTAINER-DIR[:OPTIONS]]</em></h4>
<p>Mount a host directory into containers when executing RUN
instructions during the build.</p>
<p>The <code>OPTIONS</code> are a comma-separated list and can be one or
more of:</p>
<ul>
<li>[rw|ro]</li>
<li>[z|Z|O]</li>
<li>[U]</li>
<li>[<code>[r]shared</code>|<code>[r]slave</code>|<code>[r]private</code>]<sup><a
href="#Footnote1">[1]</a></sup></li>
</ul>
<p>The <code>CONTAINER-DIR</code> must be an absolute path such as
<code>/src/docs</code>. The <code>HOST-DIR</code> must be an absolute
path as well. Podman bind-mounts the <code>HOST-DIR</code> to the
specified path when processing RUN instructions.</p>
<p>You can specify multiple <strong>-v</strong> options to mount one or
more mounts.</p>
<p>You can add the <code>:ro</code> or <code>:rw</code> suffix to a
volume to mount it read-only or read-write mode, respectively. By
default, the volumes are mounted read-write. See examples.</p>
<p><code>Chowning Volume Mounts</code></p>
<p>By default, Podman does not change the owner and group of source
volume directories mounted. When running using user namespaces, the UID
and GID inside the namespace may correspond to another UID and GID on
the host.</p>
<p>The <code>:U</code> suffix tells Podman to use the correct host UID
and GID based on the UID and GID within the namespace, to change
recursively the owner and group of the source volume.</p>
<p><strong>Warning</strong> use with caution since this modifies the
host filesystem.</p>
<p><code>Labeling Volume Mounts</code></p>
<p>Labeling systems like SELinux require that proper labels are placed
on volume content mounted into a container. Without a label, the
security system might prevent the processes running inside the container
from using the content. By default, Podman does not change the labels
set by the OS.</p>
<p>To change a label in the container context, add one of these two
suffixes <code>:z</code> or <code>:Z</code> to the volume mount. These
suffixes tell Podman to relabel file objects on the shared volumes. The
<code>z</code> option tells Podman that two containers share the volume
content. As a result, Podman labels the content with a shared content
label. Shared volume labels allow all containers to read/write content.
The <code>Z</code> option tells Podman to label the content with a
private unshared label. Only the current container can use a private
volume.</p>
<p>Note: Do not relabel system files and directories. Relabeling system
content might cause other confined services on the host machine to fail.
For these types of containers, disabling SELinux separation is
recommended. The option <code>--security-opt label=disable</code>
disables SELinux separation for the container. For example, if a user
wanted to volume mount their entire home directory into the build
containers, they need to disable SELinux separation.</p>
<pre><code>$ podman build --security-opt label=disable -v $HOME:/home/user .</code></pre>
<p><code>Overlay Volume Mounts</code></p>
<p>The <code>:O</code> flag tells Podman to mount the directory from the
host as a temporary storage using the Overlay file system. The
<code>RUN</code> command containers are allowed to modify contents
within the mountpoint and are stored in the container storage in a
separate directory. In Overlay FS terms the source directory is the
lower, and the container storage directory is the upper. Modifications
to the mount point are destroyed when the <code>RUN</code> command
finishes executing, similar to a tmpfs mount point.</p>
<p>Any subsequent execution of <code>RUN</code> commands sees the
original source directory content, any changes from previous RUN
commands no longer exists.</p>
<p>One use case of the <code>overlay</code> mount is sharing the package
cache from the host into the container to allow speeding up builds.</p>
<p>Note:</p>
<ul>
<li>Overlay mounts are not currently supported in rootless mode.</li>
<li>The <code>O</code> flag is not allowed to be specified with the
<code>Z</code> or <code>z</code> flags. Content mounted into the
container is labeled with the private label. On SELinux systems, labels
in the source directory needs to be readable by the container label. If
not, SELinux container separation must be disabled for the container to
work.</li>
<li>Modification of the directory volume mounted into the container with
an overlay mount can cause unexpected failures. Do not modify the
directory until the container finishes running.</li>
</ul>
<p>By default bind mounted volumes are <code>private</code>. That means
any mounts done inside containers are not be visible on the host and
vice versa. This behavior can be changed by specifying a volume mount
propagation property.</p>
<p>When the mount propagation policy is set to <code>shared</code>, any
mounts completed inside the container on that volume is visible to both
the host and container. When the mount propagation policy is set to
<code>slave</code>, one way mount propagation is enabled and any mounts
completed on the host for that volume is visible only inside of the
container. To control the mount propagation property of volume use the
<code>:[r]shared</code>, <code>:[r]slave</code> or
<code>:[r]private</code> propagation flag. For mount propagation to work
on the source mount point (mount point where source dir is mounted on)
has to have the right propagation properties. For shared volumes, the
source mount point has to be shared. And for slave volumes, the source
mount has to be either shared or slave. <sup><a
href="#Footnote1">[1]</a></sup></p>
<p>Use <code>df &lt;source-dir&gt;</code> to determine the source mount
and then use
<code>findmnt -o TARGET,PROPAGATION &lt;source-mount-dir&gt;</code> to
determine propagation properties of source mount, if
<code>findmnt</code> utility is not available, the source mount point
can be determined by looking at the mount entry in
<code>/proc/self/mountinfo</code>. Look at <code>optional fields</code>
and see if any propagation properties are specified.
<code>shared:X</code> means the mount is <code>shared</code>,
<code>master:X</code> means the mount is <code>slave</code> and if
nothing is there that means the mount is <code>private</code>. <sup><a
href="#Footnote1">[1]</a></sup></p>
<p>To change propagation properties of a mount point use the
<code>mount</code> command. For example, to bind mount the source
directory <code>/foo</code> do <code>mount --bind /foo /foo</code> and
<code>mount --make-private --make-shared /foo</code>. This converts /foo
into a <code>shared</code> mount point. The propagation properties of
the source mount can be changed directly. For instance if <code>/</code>
is the source mount for <code>/foo</code>, then use
<code>mount --make-shared /</code> to convert <code>/</code> into a
<code>shared</code> mount.</p>
<h2 id="examples">EXAMPLES</h2>
<p>Build named image and manifest list using specified Containerfile
with default farm:</p>
<pre><code>$ podman farm build --local -t name -f /path/to/containerfile .</code></pre>
<p>Build named image and manifest list using the specified farm:</p>
<pre><code>$ podman farm build --farm myfarm -t name .</code></pre>
<p>Build named image and manifest list using the specified farm,
removing all images from farm nodes, after they are pushed to
registry:</p>
<pre><code>$ podman farm build --farm myfarm --cleanup -t name .</code></pre>
<p>Build named images and manifest list for specified platforms using
default farm:</p>
<pre><code>$ podman farm build --platforms arm64,amd64 -t name .</code></pre>
<h2 id="see-also">SEE ALSO</h2>
<p><strong><a href="podman.html">podman(1)</a></strong>, <strong><a
href="podman-farm.html">podman-farm(1)</a></strong>, <strong><a
href="https://github.com/containers/buildah/blob/main/docs/buildah.html">buildah(1)</a></strong>,
<strong><a
href="https://github.com/containers/image/blob/main/docs/containers-certs.d.5.md">containers-certs.d(5)</a></strong>,
<strong><a
href="https://github.com/containers/image/blob/main/docs/containers-registries.conf.5.md">containers-registries.conf(5)</a></strong>,
<strong><a
href="https://github.com/containers/crun/blob/main/crun.html">crun(1)</a></strong>,
<strong><a
href="https://github.com/opencontainers/runc/blob/main/man/runc.8.md">runc(8)</a></strong>,
<strong><a
href="https://www.unix.com/man-page/redhat/8/useradd">useradd(8)</a></strong>,
<strong><a
href="https://github.com/containers/common/blob/main/docs/Containerfile.5.md">Containerfile(5)</a></strong>,
<strong><a
href="https://github.com/containers/common/blob/main/docs/containerignore.5.md">containerignore(5)</a></strong></p>
<h2 id="history">HISTORY</h2>
<p>September 2023, Originally compiled by Urvashi Mohnani
<code>&lt;umohnani@redhat.com&gt;</code></p>
<h2 id="footnotes">FOOTNOTES</h2>
<p><a name="Footnote1">1</a>: The Podman project is committed to
inclusivity, a core value of open source. The <code>master</code> and
<code>slave</code> mount propagation terminology used here is
problematic and divisive, and needs to be changed. However, these terms
are currently used within the Linux kernel and must be used as-is at
this time. When the kernel maintainers rectify this usage, Podman will
follow suit immediately.</p>
</body>
</html>
